# Gigafactory Battery Production Process Mining

This project provides a framework for analyzing and understanding the production process of a gigafactory that manufactures batteries. It leverages synthetic data generation and process mining techniques to identify bottlenecks, rework loops, and potential areas for optimization.

## Project Overview

The core functionalities of this project are:

1.  **Synthetic Data Generation:** Creates a realistic event log simulating a battery production process, including various stages, durations, potential rework loops, and batch-specific attributes.
2.  **Process Discovery:** Uses the `pm4py` library to discover a process model (Petri Net) from the generated event log, representing the actual flow of activities.
3.  **Process Analysis & Insights:** Extracts key metrics from the event log and the discovered model to provide actionable insights, such as:
    *   Most frequent activities.
    *   Identification of start and end activities.
    *   Bottleneck analysis based on average activity durations.
    *   Quantification and analysis of rework loops.
    *   Basic conformance checking (fitness, precision, robustness).
    *   Correlation analysis between batch size and process duration/rework rates.

## Technologies Used

*   **Python:** The primary programming language.
*   **Pandas:** For data manipulation and creating/handling the event log DataFrame.
*   **NumPy:** For numerical operations, especially in synthetic data generation.
*   **PM4Py:** The core library for process mining algorithms (discovery, conformance checking, visualization).
*   **Matplotlib:** For visualizing the discovered process model.

## Setup and Installation

1.  **Clone the repository** (or save the files if you're not using Git).

2.  **Create a Python virtual environment** (highly recommended):
    ```bash
    python -m venv venv
    # Activate the environment:
    # On Windows:
    # .\venv\Scripts\activate
    # On macOS/Linux:
    # source venv/bin/activate
    ```

3.  **Install the required libraries** using the `requirements.txt` file:
    ```bash
    pip install -r requirements.txt
    ```
    *   **Note:** `pm4py` might have additional dependencies that are usually handled by its installation. If you encounter issues with visualization, ensure you have `graphviz` installed and in your system's PATH. You can install it via your system's package manager (e.g., `sudo apt-get install graphviz` on Debian/Ubuntu, `brew install graphviz` on macOS).

## Project Structure

.
├── requirements.txt # Lists all Python dependencies
├── battery_production_miner.py # The main Python script for data generation and analysis
├── battery_production_event_log.csv # (Generated) Synthetic event log data
├── discovered_process_model.png # (Generated) Visualization of the discovered process model
└── README.md # This file


## How to Run

1.  **Ensure all dependencies are installed** (see Setup and Installation).
2.  **Run the main Python script:**
    ```bash
    python batter_production_miner.py
    python process_mining_analysis.py
    ```
    These scripts will:
    *   Generate synthetic battery production event log data.
    *   Save this data to `battery_production_event_log.csv`.
    *   Load the data and convert it into a `pm4py` EventLog object.
    *   Discover a process model using the Inductive Miner algorithm.
    *   Save the discovered process model visualization to `discovered_process_model.png`.
    *   Print various insights directly to the console, including:
        *   Most frequent activities.
        *   Start and end activities.
        *   Average durations of activities (identifying potential bottlenecks).
        *   Analysis of rework occurrences.
        *   Conformance metrics (fitness, precision, robustness).
        *   Correlations between batch size and process duration/rework.

## Example Insights and Recommendations (as generated by the script)

*   **Bottlenecks:** Identify which activities have the longest average processing times. These are critical areas for efficiency improvements.
*   **Rework Loops:** Pinpoint activities with high rework rates. This suggests underlying quality issues or process flaws that need immediate attention.
*   **Batch Size Optimization:** Understand if larger or smaller batch sizes correlate with longer lead times, increased rework, or other inefficiencies. This can inform production batch sizing strategies.
*   **Process Adherence:** Conformance metrics help understand how closely the actual production process adheres to the expected workflow, highlighting deviations that might be unintentional or problematic.

## Next Steps for Real-World Application

1.  **Data Collection:** Gather actual event data from the gigafactory's production systems (e.g., MES - Manufacturing Execution System, SCADA, ERP). Ensure data includes:
    *   Unique Case ID (e.g., Batch ID, Lot Number)
    *   Activity Name (e.g., "Material Received," "Stage 1 QC," "Assembly," "Final Test")
    *   Timestamp for each activity.
    *   Optional: Resource performing the activity (worker, machine), Batch Size, Quality Results.
2.  **Data Preprocessing:** Clean and transform the collected data to match the required event log format for `pm4py`.
3.  **Analysis:** Run the process mining analysis on the real data to uncover process-specific insights and challenges.
4.  **Actionable Improvements:** Based on the insights, implement targeted improvements in areas such as quality control, automation, scheduling, or resource allocation.

This project serves as a proof-of-concept. Applying it to real gigafactory data will provide much deeper and more precise insights into optimizing battery production.
